<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
  <id>https://notebook.drmaciver.com/</id>
  <title>DRMacIver's notebook</title>
  <updated>2024-01-02T12:48:00+00:00</updated>
  <author>
    <name>David R. MacIver</name>
    <email>david@drmaciver.com</email>
  </author>
  <link href="https://notebook.drmaciver.com" rel="alternate"/>
  <link href="https://notebook.drmaciver.com/feed.xml" rel="self"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2022-08-07-00:51.html</id>
    <title>Notes on the design of a conference scheduler</title>
    <updated>2022-11-02T16:15:57+00:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;Notes on the design of a conference scheduler&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2022-08-07&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;NB: This post is unfinished but it accidentally got added to the index and people keep asking about it, so I decided to publish it as is.&lt;/p&gt;


&lt;p&gt;One of my lesser known but surprisingly impactful contributions to the world is the talk &lt;a href="https://www.youtube.com/watch?v=OkusHEBOhmQ"&gt;Easy solutions to hard problems&lt;/a&gt;, which is about mixed integer linear programming (MILP) and in particular about how to use integer linear programming to schedule conferences. Off the back of this, several conferences, including &lt;a href="https://www.emfcamp.org/"&gt;Electromagnetic field&lt;/a&gt; have scheduled their conferences using MILP.&lt;/p&gt;


&lt;p&gt;I now think that was a mistake. Sorry.&lt;/p&gt;


&lt;p&gt;There are roughly three problems with this approach:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;It's actually really slow. Not as slow as scheduling it by hand maybe, but the EMF scheduler apparently takes most of a day to run.&lt;/li&gt;
&lt;li&gt;It gives totally opaque error messages when things go wrong.&lt;/li&gt;
&lt;li&gt;Every time I've attended a conference scheduled this way I'm left with a vague sense that the schedule is just not very good. It's a bit all over the place in a way that I feel like a human scheduler would have done better.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Set against this, you really &lt;em&gt;do&lt;/em&gt; want a computer in the loop because scheduling things by hand is such a nightmare that this is still preferable for the organisers despite the trade off.&lt;/p&gt;


&lt;p&gt;Anyway I was thinking about this recently and realised that there's probably a nicer way to do this.&lt;/p&gt;


&lt;p&gt;The basic design is to follow the model from &lt;a href="http://oro.open.ac.uk/3275/4/Can_a_machine_design.pdf"&gt;Can a machine design?&lt;/a&gt; for human-machine collaboration, which is that it is the job of a computer to propose solutions and for the human to correct them. So instead of designing a &lt;em&gt;scheduler&lt;/em&gt; we are effectively designing a &lt;em&gt;schedule editor&lt;/em&gt;. The computer proposes an initial schedule, which is expected to not be especially good, and then maintains the schedule and all its constraints as the human makes edits to it.&lt;/p&gt;


&lt;p&gt;This solves the problem of the schedule missing the human touch, because the human can make changes until they're happy with the schedule, and it's the job of the computer to make those changes work. &lt;/p&gt;


&lt;p&gt;The UI I'm imagining this is essentially a version of the schedule, in which a user can drag things around and have everything reorder itself to make it work.&lt;/p&gt;


&lt;p&gt;The basic operations I'm imagining are:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;Lock a talk into the slot it's currently scheduled in, so it will not be moved in future.&lt;/li&gt;
&lt;li&gt;Move a talk into a new slot, replacing the talk that's currently there. This will either succeed, or the software will say that it's forbidden (because the talk is not allowed into that slot because of e.g. constraints on when the speaker can manage), or that it has to unlock the following talks in order to make it work (with an explanation of why).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Many more operations are implementable (e.g. you could easily implement a "Move this talk somewhere else, I don't care where as long as it fits the requirement" operation), these are just the obvious basics. &lt;/p&gt;


&lt;p&gt;Implementing the UI for this should be relatively straightforward for anyone who is actually good at UI. I'm not, and I'm not invested enough in this problem to want to pick up the relevant skills. If you're interested in this problem and already good at UI, feel free to drop me a line and talk about collaborating on this, because I pretty much know how all the algorithmic details should work!&lt;/p&gt;


&lt;h3&gt;Implementation&lt;/h3&gt;


&lt;p&gt;These operations are relatively easy to implement, and the basic algorithmic toolkit for this is to use &lt;a href="https://en.wikipedia.org/wiki/Hall%27s_marriage_theorem"&gt;Hall's marriage theorem&lt;/a&gt;.
Hall's marriage theorem says that if you have some set of items (talks) you want to put into boxes (slots in the schedule), and each item can only go in some boxes (each talk can only be scheduled in certain slots), and each box can only hold one item (each slot can only have one talk), then either you can find an assignment that works, or you can find some set of items which is strictly larger than the number of boxes that are allowed to hold those items. e.g. there are three slots but four talks that all have to go in one of those three slots.&lt;/p&gt;


&lt;p&gt;Hall's marriage theorem is relatively easy to implement an efficient algorithm for if you have access to an implementation of the &lt;a href="https://en.wikipedia.org/wiki/Hopcroft%E2%80%93Karp_algorithm"&gt;Hopcroft-Karp algorithm&lt;/a&gt; (and fortunately &lt;a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csgraph.maximum_bipartite_matching.html"&gt;scipy has just such an implementation&lt;/a&gt;).
You use this to find the largest possible assignment of items to boxes. If this assigns every item to a box, great you're done. If not, you can use the unassigned items to construct a &lt;a href="https://en.wikipedia.org/wiki/Hall_violator"&gt;Hall violator&lt;/a&gt; - a set of items that cannot possibly be put into distinct boxes because there aren't enough boxes.&lt;/p&gt;


&lt;p&gt;As a side note, one nice thing about this algorithm is that it has the opposite efficiency characteristics to using MILP for this: The more constrained your problem gets, the faster it runs. As a result, it should (I think) be viable to use it the way I need to use it for this design, because we'll mostly want to run it with quite constrained problems.&lt;/p&gt;


&lt;p&gt;(You can also use MILP to solve the maximum matching problem and it may under some circumstances me more efficient to do that. This is something that would require experimentation. Certainly using a MILP gets you more flexibility than using Hall's theorem, because it lets you handle things like "these two talks shouldn't clash" natively)&lt;/p&gt;


&lt;p&gt;Anyway, it's easy enough to use Hall's marriage theorem for the initial schedule: You just run it on your constraints, and it either gives you a schedule or tells you that you e.g. have too many talks that have to go into a particular day.&lt;/p&gt;


&lt;p&gt;Here's how to use it to power what should be a pretty good schedule editor:&lt;/p&gt;


&lt;p&gt;You always have a current schedule that you are working on. In response to requests from the user, the scheduler makes (ideally small) edits to the schedule by rearranging sets of talks.&lt;/p&gt;


&lt;p&gt;Each talk has an epoch, which is the last time it was moved. The goal is to have the schedule converge to stability, so we always prefer to move talks that are from a more recent epoch. Initially, all talks are given a random distinct epoch. A talk may also be locked (as marked by the user), in which case it will not be moved without the user asking. We will also sometimes temporarily lock talks as part of a rescheduling.&lt;/p&gt;


&lt;p&gt;When a user moves a talk to a new slot, the following happens:&lt;/p&gt;


&lt;p&gt;First, check if the talk is allowed in its new slot (i.e. it satisfies the constraints as to which rooms, times, etc the talk is allowed in). If not, complain to the user and don't move it.&lt;/p&gt;


&lt;p&gt;Second, if the talk that is already there is allowed in the slot you're moving out of, swap the two. Similarly if the slot is empty because you don't have a full schedule, just move the talk there.&lt;/p&gt;


&lt;p&gt;Finally, if&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2022-08-07-00:51.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2022-10-02-06:24.html</id>
    <title>There are a lot of irreducible finite partial orders</title>
    <updated>2022-10-02T07:19:04+01:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;There are a lot of irreducible finite partial orders&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2022-10-02&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;Advance warning: You don't care about this post. Tersely written notes about a question you've probably never wondered about.&lt;/p&gt;


&lt;p&gt;A problem I've been thinking about on and off for a month or two is as follows:&lt;/p&gt;


&lt;p&gt;Let \(A\), \(B\) be partial orders. You can combine them with the following operations:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;\(A \sqcup B\) is the partial order on the disjoint union of \(A\) and \(B\) such that no element of \(A\) is comparable to an element of \(B\) (and elements of \(A\) and \(B\) compare as usual).&lt;/li&gt;
&lt;li&gt;\(A // B\)  is the partial order on the disjoint union of \(A\) and \(B\) such that \(a \preceq b\) for \(a \in A\) and \(b \in B\) (and elements of \(A\) and \(B\) compare as usual).&lt;/li&gt;
&lt;li&gt;\(A \times B\) is the partial order on the product of \(A\) and \(B\) such that \((r, s) \preceq (u, v)\) iff \(r \preceq u\) and \(s \preceq v\).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Say a partial order is irreducible if it cannot be expressed as a combination of two non-trivial smaller partial orders with one of these operations (note: non-trivial means "non-empty" for the first two and "more than one element" for the third).&lt;/p&gt;


&lt;p&gt;You can think of the irreducible finite partial orders as a sort of building block for the finite partial orders, and something I've been wondering is if irreducible finite partial orders have a nice characterisation and how many there are. I now think the answers are: Probably not, and lots.&lt;/p&gt;


&lt;p&gt;Here are some vaguely negative results in this space.&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;There are irreducible partial orders of size \(n\) for every \(n &amp;gt; 3\). There are no irreducible partial orders of size \(2\) or \(3\).&lt;/li&gt;
&lt;li&gt;There are at least \(O(2^{O(n)})\) non-isomorphic irreducible partial orders of size \(n\).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;As a warm up let's see why there are no irreducible partial orders of size \(2\) or \(3\).&lt;/p&gt;


&lt;p&gt;\(2\) is easy. Let \(P = \{a, b\}\) be a partial order of size \(2\). If \(a \preceq b\) then \(P = \{a\} // \{b\}\). Similarly the other way round. Otherwise, \(P = \{a\} \sqcup \{b\}\).&lt;/p&gt;


&lt;p&gt;\(3\) is slightly more complicated.&lt;/p&gt;


&lt;p&gt;It's helpful to think about this in terms of the level decomposition. The level of an element \(x \in P\) is the length of the longest chain ending in \(x\). Call that \(l(x)\). The height of \(P\) is the maximum level of an element of \(P\) (equivalently, the length of the longest chain in \(P\)), which we will call \(h(P)\). A level of \(P\) is a set of the form \(\{x \in P: l(x) = k\}\) for some \(k\).&lt;/p&gt;


&lt;p&gt;Suppose \(P\) were an irreducible poset of size \(3\). If it has \(3\) levels, then it's a chain, so can be decomposed with \(//\).
If it has \(1\) level, it's an antichain so can be decomposed with \(\sqcup\). So it must have \(2\) levels. Thus we can write \(P = \{a, b, c\}\) with \(a \leq b\).&lt;/p&gt;


&lt;p&gt;If \(c\) is in level \(2\), then \(a \leq c\) (because \(a\) is the only element of level \(1\)), and so we can write \(P = \{a\} // \{b, c\}\). If \(c\) is in level \(1\), then if \(c \neq\preceq b\), we can write \(P = \{a, b\} \sqcup \{c\}\), so \(P\) is reducible. Therefore \(c \preceq b\), and so we can write \(P = \{a\} // \{b, c\}\). Thus, \(P\) could not have been irreducible.&lt;/p&gt;


&lt;p&gt;Now to see that for \(n &amp;gt; 3\) there is always an irreducible poset.&lt;/p&gt;


&lt;p&gt;Construct a poset as \(P = \{a_1, \ldots, a_{n - 2}, b, c\}\) and order it as follows: \(a_i \leq b\) for all \(i\), and only \(a_ \leq c\).&lt;/p&gt;


&lt;p&gt;This is irreducible. It's clearly not reducible by \(\sqcup\) because every element is connected to every other by some sequence of comparisons. It's clearly not reducible by \(//\) because not every element of the bottom level is comparible with every element of the second level (this is where we used \(n &amp;gt; 3\) - we need an \(a_2\) for this to be true).&lt;/p&gt;


&lt;p&gt;To see it's not reducible by \(\times\), we need to know that \(h(A \times B) = h(A) + h(B)\). This is true because you can basically create a maximal length chain by moving up each coordinate's chain in a zigzag fashion.&lt;/p&gt;


&lt;p&gt;Thus if \(P = A \times B\), we must have \(h(A) + h(B) = 2\). This requires both \(A\) and \(B\) to have height \(1\), which would make them antichains, so \(P\) would be an antichain, but it's not.&lt;/p&gt;


&lt;p&gt;In fact a stronger result holds: If \(h(P) \leq 3\), then if \(h\) is reducible by \(\times\), it's reducible by \(\sqcup\).&lt;/p&gt;


&lt;p&gt;We saw the \(h(P) = 2\) case above. If \(h(P) = 3\) and \(P = A \times B\) with \(A, B\) non-trivial then we must have one of \(A\) or \(B\) have height \(1\). Say it's \(A\). Then \(A\) is an antichain and because it's non-trivial has more than one element, so we can write \(A = X \sqcup Y\) with \(X, Y\) non-empty. Then \(P = X \times B \sqcup Y \times B\).&lt;/p&gt;


&lt;p&gt;Anyway, we can extend the idea behind this as follows to construct families of lots of non-isomorphic irreducible partial orders as follows.&lt;/p&gt;


&lt;p&gt;Let \(k &amp;gt; 0\). Construct a partial follow out of elements \(P = \{a_1, \ldots, a_k\} \cup \{b_1, \ldots, b_k\} \cup \{c_U: U \subseteq \{1, \ldots, k\}, U \neq \emptyset\} \cup \{q\}\).&lt;/p&gt;


&lt;p&gt;The rules are:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;\(a_i \leq b_j\) iff \(i \leq j\).&lt;/li&gt;
&lt;li&gt;\(a_i \leq c_U\) iff \(i \in U\).&lt;/li&gt;
&lt;li&gt;\(b_j \leq q\)&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The idea of this construction is that there are \(O(2^k)\) elements in this partial order, and all of them are distinguishable up to isomorphism. i.e. the set has a trivial automorphism group.&lt;/p&gt;


&lt;p&gt;To see this, let \(f : P \to P\) be an automorphism. Then \(h(f(q)) = h(q) = 3\), so \(f(q) = q\) because \(q\) is the only level \(3\) element. Thus \(f(\{b_i\}) = \{b_i\}\), because they're the only elements directly below \(q\), and we can distinguish the \(b_i\) by how many elements are under them. Thus \(f\) must also preserve the \(a_i\), and thus also the \(c_U\).&lt;/p&gt;


&lt;p&gt;\(P\) is irreducible by our above result, but more importantly now let \(X \subseteq \{c_i\}\). Define \(P_X = P \cup d_X\), where \(d \leq c_U\) iff \(c_U \in X\).&lt;/p&gt;


&lt;p&gt;This is still height \(3\), and still clearly not reducible by either \(\sqcup\) or \(//\), so is an irreducible set.&lt;/p&gt;


&lt;p&gt;More, for \(X \neq Y\), we have \(P_X \neq P_Y\), because any isomorphism betweem them would have to preserve the \(C_U\), and so would fail to be an isomorphism because \(d_X\) and \(d_Y\) are below different \(c_U\).&lt;/p&gt;


&lt;p&gt;This gives of \(O(2^{O(|P|)})\) non-isomorphic irreducible partial orders of size \(|P| + 1\).&lt;/p&gt;


&lt;p&gt;For general \(n\), construct the largest version of \(P\) such that \(|P| + 1 \leq n\), and just add in a bunch of extra elements more or less any way that works, and you'll get the same bounds.&lt;/p&gt;


&lt;p&gt;It may still be that there's some interesting deep structure to look at for irreducible finite partial orders, but I think these examples show that there's probably not: There are just too many of them, and it's all a bit messy.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2022-10-02-06:24.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2022-11-02-15:46.html</id>
    <title>Examples of missing support networks</title>
    <updated>2022-11-02T16:13:52+00:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;Examples of missing support networks&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2022-11-02&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;I did a popular tweet:&lt;/p&gt;


&lt;blockquote class="twitter-tweet"&gt;&lt;p dir="ltr" lang="en"&gt;The modern condition is mostly trying to do things on your own that people have historically achieved with a large support network and wondering why you're tired all the time.&lt;/p&gt;— David R. MacIver (@DRMacIver) &lt;a href="https://twitter.com/DRMacIver/status/1586850511726206983?ref_src=twsrc%5Etfw"&gt;October 30, 2022&lt;/a&gt;&lt;/blockquote&gt;


&lt;p&gt;&lt;script async="" charset="utf-8" src="https://platform.twitter.com/widgets.js"&gt;&lt;/script&gt;&lt;/p&gt;


&lt;p&gt;People are, quite reasonably, asking me for examples beyond the really obvious one of parenting.&lt;/p&gt;


&lt;p&gt;In truth, I do think my tweet is overly simplistic, and there's a lot more going on. I wrote it partly because I'm living on my own at the moment and really don't like it, and I'm soon going to be living in a much more extended household and very much looking forward to it, and just the general ease of being relied upon and being able to rely on other people for the little things, and the changes I'm expecting (not, I think, to an unwarranted degree - it's different, but it's far from the first time I've lived with others) are many and small, so pointing at specific examples feels almost beside the point.&lt;/p&gt;


&lt;p&gt;Nevertheless, here are a few big examples. It's not a terribly well thought out list, this is just off the top of my head. It feels more pervasive than these examples would suggest, as I think this is often an aggregate of many small things.&lt;/p&gt;


&lt;p&gt;One of the examples that often comes up that makes me think about this is that if you look at a lot of past (and to some degree current) examples of extremely successful scientists etc. who published a million books, it turns out the "trick" behind their productivity was that they certainly had their wife acting as their personal secretary and possibly an entire household because they were aristocracy.&lt;/p&gt;


&lt;p&gt;This is a super privileged position of course, but when you look at people trying to achieve similar things today they certainly aren't in that super privileged position but are trying to achieve the same things.&lt;/p&gt;


&lt;p&gt;You see this at work too - e.g. most positions you would previously have secretaries, admin staff, etc. helping you out, and you would be able to rely on your housewife keeping home for you.&lt;/p&gt;


&lt;p&gt;This isn't a "feminism is bad" take don't worry. But it's important to bear in mind that the workload and assumptions of most jobs are designed around the idea that keeping house, life admin, etc. is something someone else is doing for you.&lt;/p&gt;


&lt;p&gt;Also on the work front there was much more in the way of apprenticeships and mentorships, and the expectation that you would have a long-term career at a given place got you (in theory, and sometimes also in practice) a lot more support from a network of people at work.&lt;/p&gt;


&lt;p&gt;The gig economy in which everyone is an independent contractor is the ultimate version of stripping this community of support away at work.&lt;/p&gt;


&lt;p&gt;From the consumer side, companies were often part of your support network in a way they no longer are, with increasingly large amounts of &lt;a href="https://en.wikipedia.org/wiki/Shadow_work"&gt;shadow work&lt;/a&gt; where things that you could previously get help on are now your responsibility, increasing your workload.&lt;/p&gt;


&lt;p&gt;On top of this, there's plenty of absent general community support stuff - having friends you can call on to help you out with a task (e.g. my "&lt;a href="https://twitter.com/DRMacIver/status/1564603678484566019"&gt;oh shit how do I get a table upstairs?&lt;/a&gt;" recently), or who will check up on you when you're ill, or whatever is much harder than it should be and historically often was (and to some degree still is in smaller communities, but my impression is that even there it's much less of a thing now).&lt;/p&gt;


&lt;p&gt;In general one of the big functions of support networks is that they absorb variance - even things that you're fine to do on your own 90-95% of the time, you sometimes need someone else to pick up the slack when things go bad.&lt;/p&gt;


&lt;p&gt;Emotional support is like this too. "Go to therapy" is a way of making an individual responsiblity of emotional problems that often need a whole community to support you. Often historically (and perhaps currently? I'm not very familiar with religious culture except second hand, but my impression this is at least &lt;em&gt;less&lt;/em&gt; true than it used to be) this would be a religious community. You'd have your priest, but you'd also have other members of the congegration to help you out.&lt;/p&gt;


&lt;p&gt;Regardless of the religious content, when you're having a bad time you should be able to draw on a community of people who have your back, and heart emojis on social media when you sadpost doesn't quite cut it.&lt;/p&gt;


&lt;p&gt;Distributed trust is another one. I've complained about the problem of e.g. &lt;a href="https://notebook.drmaciver.com/posts/2022-06-05-14:53.html"&gt;how to find a good plumber&lt;/a&gt; before, but historically this is something you solve by asking your community. Communities maintain social knowledge and help you figure out how to navigate the world.&lt;/p&gt;


&lt;p&gt;One of the discussions in the replies to my tweet is about housework and cooking and such. I think this is ambiguously an example - an extended family living under one roof does absolutely count as a support network for doing this, but in the middle class UK/USA cultures I'm most familiar with the lack of these is only "modern" in the sense that it's a 20th century trend. The actual solution we've had more recently which is now also gone was generally housewives again. With both partners working, or someone living alone or with flatmates with whom they don't really share a life, you're implicitly trying to do the work of two people. Not a "large" support network, but support nonetheless.&lt;/p&gt;


&lt;p&gt;A lot of these have "replacements" from technology or the market. I think it's good that those exist, and it's good that people can do more as individuals, but they are far from a complete replacement for a full support network, and based on the slightly overwhelming amount of responses this tweet got, it seems like other people feel similarly.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2022-11-02-15:46.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2022-12-08-20:25.html</id>
    <title>Notes on shaking</title>
    <updated>2022-12-09T17:14:30+00:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;Notes on shaking&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2022-12-08&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;The other night I was failing to sleep, feeling very physically agitated and generally unable to relax.
So I followed through on the muscle tension, basically started shaking and shivering, and spent about 10 minutes writhing around on my bed, seemingly in agony (I wasn't, but I think an outside observer would very much have thought I was).&lt;/p&gt;


&lt;p&gt;About a month ago now, I was doing the washing up, and had a bizarrely strong emotional reaction to it, and ended up curling up into a ball on the floor right there in front of the sink.&lt;/p&gt;


&lt;p&gt;This is all a bit odd, but right now it's actually pretty normal for me. I'm hoping it will calm down as I work out whatever is going on, but so far it seems a moderately unpleasant and very weird but basically harmless and often quite helpful set of practices.&lt;/p&gt;


&lt;p&gt;Anyway, let me start from the beginning.&lt;/p&gt;


&lt;h3&gt;Dear penthouse, a funny thing happened to me in bed recently&lt;/h3&gt;


&lt;p&gt;A few months ago at the time of this writing, I had a scary conversation with my girlfriend, Lisa.&lt;/p&gt;


&lt;p&gt;I knew it was going to go fine, intellectually, but it was about something I have a lot of insecurities around, and that it was very easy emotionally to imagine it going badly. It was quite hard for me to even get out the words for my end of the conversation. I had to bring out the big guns: Having the conversation while cooking and pretending to myself it wasn’t a big deal.&lt;/p&gt;


&lt;p&gt;It went fine, obviously. Lisa’s great and it was never not going to go fine. We had dinner, and then went to bed.&lt;/p&gt;


&lt;p&gt;Shortly after we went to bed my legs started shaking. It started as a pretty comically stereotypical knees knocking type motion and gradually progressed into more full blown shakes.&lt;/p&gt;


&lt;p&gt;I then spent the next two hours doing this, some of it shaking pretty hard. I’m reasonably confident I wasn’t having a seizure, but it's hard to describe what happened in a way that doesn't make it sound an awful lot like having a seizure. The main difference is that it felt like I could stop at any moment by just getting out of bed and calming down, although it did feel like that was what it would take - it wasn't uncontrollable, but it certainly wasn't easy to control.&lt;/p&gt;


&lt;p&gt;Eventually that’s what I did - it didn’t stop because the shaking stopped on its own, it stopped because after about two hours I decided that I was entirely worn out by this and wanted to stop, so we got out of bed, I had a chamomile tea and calmed down.&lt;/p&gt;


&lt;p&gt;During all of this, Lisa did a mix of holding me, telling me I was safe, and telling me to stop making jokes about it and just let it happen. “You can stop any time you want to, but you have to choose to stop, I’m not going to let you deflect.”&lt;/p&gt;


&lt;p&gt;Lisa handled all of this very well. I was and still am impressed.&lt;/p&gt;


&lt;p&gt;At some point in all of this I curled up into a ball. “Everything’s fine, I just need to curl up into a ball for a bit, as one does.”&lt;/p&gt;


&lt;p&gt;This was one of the points at which Lisa told me to stop making jokes.&lt;/p&gt;


&lt;p&gt;I’m not sure how long I was curled up for but eventually I had to uncurl because I’m nearly 40 and not all that flexible. Some time after that I realised that I was apparently not done and needed to curl back up.&lt;/p&gt;


&lt;p&gt;One thing that I should mention here is that this whole process was &lt;em&gt;boring&lt;/em&gt;. My conscious mind just found the whole thing weird and vaguely confusing and not that interesting. This is almost certainly a deflection. But there was no conceptual content and very little emotional content.&lt;/p&gt;


&lt;p&gt;At some point I mentioned this and Lisa said that I seemed terrified. There was definitely a bit of an emotional response to that.&lt;/p&gt;


&lt;p&gt;I did cry a few times during the whole ordeal, but it still felt very inhibited.&lt;/p&gt;


&lt;p&gt;I slept reasonably well after this (I think Lisa slept less well. This was probably more stressful for her than it was for me).&lt;/p&gt;


&lt;p&gt;The next day I had DOMS (muscle soreness). One interesting thing is that I had it much more in the leg I normally have chronic pain in, but the actual chronic pain was significantly reduced. This didn’t last, and I’m not sure it was real, but it sure was interesting.&lt;/p&gt;


&lt;h3&gt;War never changes&lt;/h3&gt;


&lt;p&gt;Such a dramatic incident should, naturally, result in a period of reflection and exploration and generally integrating the experience and learning from it.&lt;/p&gt;


&lt;p&gt;Instead I spent the next two weeks on a war footing, engaged in a major dispute with my landlord, gearing up for a long protracted legal battle.&lt;/p&gt;


&lt;p&gt;This then immediately evaporated when I got sufficiently serious that my landlord backed down, leaving a lot of fighty energy with nowhere to go.&lt;/p&gt;


&lt;p&gt;This then was followed by about two weeks of depression in which I was basically nonfunctional. Very tired, spent most of the day watching videos and playing games. No ability to read at all except for very trashy fiction. I think of this as being stuck in a Freeze state, although I’m not sure if that’s strictly accurate.&lt;/p&gt;


&lt;p&gt;This also was a period in which I was having really bad insomnia. Lots of physical agitation at night that wouldn’t go away.&lt;/p&gt;


&lt;p&gt;I did use the big guns (watching Slay the Spire videos and very occasionally sleeping pills) and that helped a bit but the problem kept getting worse, and the mitigations helped less and less.&lt;/p&gt;


&lt;p&gt;One night when I was having a particularly bad night I started paying attention to the physical sensations of the agitation and trying to see what sort of actions they “wanted” to do, and the result was more shaking.&lt;/p&gt;


&lt;p&gt;I was watching a Baalorlord slay the spire video at the time and that felt quite helpful. It gave me something to focus on in between shakes and generally felt like it helped make the whole experience feel safer.&lt;/p&gt;


&lt;p&gt;It felt quite different from the previous incident with Lisa. They weren’t the same motions particularly, and it was much more voluntary (it’s not exactly voluntary, but the previous incident it felt like I had to actively work to stop it, while this it felt more like I had to actively choose to lean into it in order to get anything to happen).&lt;/p&gt;


&lt;p&gt;The other big difference is roughly... where the motion starts? Before it started from my legs and spread upwards, while this feels very focused on my upper body and sometimes spreads down into my lower. There’s also a lot more almost writhing around feeling out the right motion.&lt;/p&gt;


&lt;p&gt;One interesting thing about this is that after every shake that I felt calmer. It was very specifically a place for the physical agitation to go. As a result, after about half an hour of this, I was able to fall asleep despite previously feeling very far from being able to do so.&lt;/p&gt;


&lt;p&gt;Then the next day I was out of my Freeze state. I wasn’t feeling amazing, but I could think and read and generally function for the first time in weeks.&lt;/p&gt;


&lt;p&gt;Since then I’ve found most nights have at least some of this. Not necessarily a huge amount, but often when I’m in bed there’s a bit of shaking and writhing around as part of getting relaxed enough to sleep.&lt;/p&gt;


&lt;h3&gt;What the fuck is going on?&lt;/h3&gt;


&lt;p&gt;Let's talk about Trauma Releasing Exercises.&lt;/p&gt;


&lt;p&gt;Trauma releasing exercises (TRE) are a therapy tool the basic idea of which is that the natural response to traumatic events is to shake it off once you’re safe, and that we habitually suppress these shakes because they seem weird, and this causes a build up of trauma stored up in the muscles that we have to shake off. Their evidence for this shaking phenomenon is how people in shock behave and that various cultures do have more common habits of shaking after big events (the former seems true to me, I don't trust amateur anthropology so I'm somewhat reserving judgement on the latter, but it certainly could be true).&lt;/p&gt;


&lt;p&gt;I’m a bit sceptical of this story but it certainly seems more plausible to me now than it did before.&lt;/p&gt;


&lt;p&gt;I do basically subscribe to the theory that emotions are experienced bodily, and that the way to better understand your own emotions is to learn to pay attention to your own body.&lt;/p&gt;


&lt;p&gt;I think also that muscle tension is often a way to regulate emotions. Certainly when I'm having a strong emotional reaction, I can literally "keep hold of myself", in a way that feels very physical like I'm tensing the appropriate muscles for control.&lt;/p&gt;


&lt;p&gt;The "trauma is stored in the body" school of therapy seems to be about habitual patterns of muscle tension like this. If you're always holding yourself very tightly, keeping control of your emotions, then you'll build up habitual patterns of tension in your muscles, and learning to relax that tension is required if you want to have proper access to those emotions.&lt;/p&gt;


&lt;p&gt;TRE are exercises designed to tire out your psoas muscle and trigger the shaking response that you see after a triggering event, in an attempt to "release the trauma" that you are storing in these patterns of muscle tension.&lt;/p&gt;


&lt;p&gt;I’ve done them before and they’re super weird and interesting, but I didn’t notice much therapeutic effect. That being said, the initial leg shakes in my first night of this seemed a lot like the shakes from doing a TRE. I thought I’d try them again and see what happened.&lt;/p&gt;


&lt;p&gt;It doesn’t feel much like the shaking I’ve been experiencing. There’s definitely a similarity in the leg movements, but it feels more purely physical.&lt;/p&gt;


&lt;p&gt;One thing I did notice doing these is that I could almost feel the shape of things in my body and patterns of muscle tension from where the shakes were. In particular the shakes seemed to avoid my injured knee.&lt;/p&gt;


&lt;p&gt;I do think that having done these in the past was an interesting reference point that made the spontaneous shaking feel safer, and they’re a good work out so I may try them some more, but I’m sortof convinced that these exercises are just coincidentally replicating the shape of something useful without being therapeutically useful themselves.&lt;/p&gt;


&lt;p&gt;I do recommend them giving them a go though. They're interesting and worth trying at least once.
&lt;a href="https://www.youtube.com/watch?v=WZOtBY4RTLo"&gt;This is the guided video I use&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;But I really don't think they work, except by accident. Possibly they provide a good basis for creating a space in which to do the real thing, but they are not themselves the real thing and can't force it.&lt;/p&gt;


&lt;h3&gt;Interpretation as a barrier to right action&lt;/h3&gt;


&lt;p&gt;There's a principle I tried adhering to for a while. It's very sensible, seems theoretically well grounded, and is all round good advice except for the fact that as far as I can tell it doesn't work. Worse, it's so close to something that does work that it distracts you from the real thing.&lt;/p&gt;


&lt;p&gt;The principle is this: If you would describe your feelings as "I feel like I want to just curl up into a ball", why not just curl up into a ball?&lt;/p&gt;


&lt;p&gt;The answer is because if you do that then now you still feel the same way but also you feel kinda dumb. It doesn't help.&lt;/p&gt;


&lt;p&gt;Here's the corrected version of the principle: If you want to curl up into a ball, why not curl up into a ball?&lt;/p&gt;


&lt;p&gt;The difference is annoyingly subtle. It's in the lack of an interpretive layer.&lt;/p&gt;


&lt;p&gt;Let me give you an unrelated example. You know the thing where doctors tap your knee to test your reflexes? I was quite bad at it as a kid.&lt;/p&gt;


&lt;p&gt;How can you be bad at a reflex test?&lt;/p&gt;


&lt;p&gt;Well, the first time the doctor tapped my knee I was like "Ah yes, I know what this test is, I'm supposed to kick" and kicked.&lt;/p&gt;


&lt;p&gt;As well as being on a significantly longer delay, the kick was much more exaggerated than the reflexive jerk would be. It was very clear to the doctor that this was Not The Thing. He laughed and told me just to let it happen.&lt;/p&gt;


&lt;p&gt;The next time he tapped my knee, I knew I wasn't supposed to kick, so my leg didn't move at all. Turns out, the reflex response is pretty easy to suppress if you try, it just requires holding your muscles tightly.&lt;/p&gt;


&lt;p&gt;I assume we must have got the exercise working eventually but I don't remember for sure. This was like 30 to 35 years ago now, my memory is a bit fuzzy on the details.&lt;/p&gt;


&lt;p&gt;Similarly, if someone throws a ball at you, and you see it, and you think "Ah, a ball, I should catch it", and move based on that thought, you'll probably fail to catch the ball.&lt;/p&gt;


&lt;p&gt;There are two different ways you can respond to external events. One goes as follows:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;Observe.&lt;/li&gt;
&lt;li&gt;Interpret the observational data.&lt;/li&gt;
&lt;li&gt;Act on that interpretation.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The other goes:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;Observe.&lt;/li&gt;
&lt;li&gt;Act on that observation.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The former isn't bad, in that it inserts a great deal of intelligence into the loop that allows you to figure out things you wouldn't otherwise and act beyond your current capabilities, but it's also not exactly good. The results are awkward, and often poorly suited in detail. They tend to be clumsy and unnatural seeming, often poorly timed, overly strong, overly weak, or otherwise not quite fitting.&lt;/p&gt;


&lt;p&gt;The same holds with acting on internal observations I think.&lt;/p&gt;


&lt;p&gt;When doing Focusing, in the Gendlin sense, you are trying to put a description on a "felt sense", a physically felt bundle of sensations that capture some crucial feeling. You follow the felt sense until you find a description that feels right.&lt;/p&gt;


&lt;p&gt;The most important sensation to pay attention to in Focusing is "no, that's not quite it". The difference between not quite right and the right thing is, to quote probably-not-Mark-Twain the difference between lightning and lightning bug.&lt;/p&gt;


&lt;p&gt;Following through on your interpretation of the felt sense rather than the felt sense itself feels very much like a lightning bug, as do Trauma Releasing Exercises.
Acting on the motion feels like lighting. Based on what actually happens, it probably looks a bit like being struck by lighting too.&lt;/p&gt;


&lt;h3&gt;Is this good?&lt;/h3&gt;


&lt;p&gt;Having borderline seizure-like episodes and randomly having tic-like symptoms or curling up on the floor in the middle of washing up the dishes seems bad, but I think this is good.&lt;/p&gt;


&lt;p&gt;Certainly my quality of sleep has massively improved since figuring out how to do this. There's a lot of physical agitation that I sometimes experience on bad nights that this allows me to release that agitation in a way that makes sleep possible on nights when it would previously have been a massive struggle.&lt;/p&gt;


&lt;p&gt;It also seems to allow me to get out of Freeze states, in a way that nothing I've previously tried behaviour ever has.&lt;/p&gt;


&lt;p&gt;If that was all it did, this would be a huge massive win, but it also feels something like... this is what it's supposed to be like?&lt;/p&gt;


&lt;p&gt;I don't think all the random shaking is supposed to be normal, but it feels like I'm clearing out a massive backlog of things that I've been suppressing for years.&lt;/p&gt;


&lt;p&gt;It's also made me far more sensitive to certain sensations I think I've historically ignored. I'm much more aware of certain emotional states that were previously a complete mystery because I couldn't really put words to them. I still can't really, certainly not a good Focusing handle for them, but it turns out that some feelings are better expressed as motions.&lt;/p&gt;


&lt;p&gt;I don't know where this is going - it feels like I've unlocked a missing piece of how things are supposed to work, and I'm still building out the foundations of that before I can even properly integrate it into the rest.&lt;/p&gt;


&lt;h3&gt;Tracing my steps&lt;/h3&gt;


&lt;p&gt;I don't want this to sound like I know what I'm talking about. I'm just reporting on a bunch of weird-ass experiences and my interpretation of them.&lt;/p&gt;


&lt;p&gt;But given that I think this is probably good, if you've got similar problems to me it might be worth trying to figure out how to do it yourself.&lt;/p&gt;


&lt;p&gt;How? Uh... excellent question.&lt;/p&gt;


&lt;p&gt;The particular mental motion that triggers something like this is something like... notice a particular pattern of muscle tension, and stop stopping it from doing what it wants to do, then do whatever comes naturally next.&lt;/p&gt;


&lt;p&gt;I expect that this explanation is completely unhelpful if you can't already do it.&lt;/p&gt;


&lt;p&gt;Something that's helpful for triggering it more clearly is to notice the tension, tense it up further, and do a sort of "follow up on the rebound" - when you release the clench, your muscles move in a particular way, just let them keep doing that, and if any sort of movement naturally completes from there, let that happen.&lt;/p&gt;


&lt;p&gt;I find this works particularly well for tension in my shoulders, and that often once I've started the motion, it often works downwards from there.&lt;/p&gt;


&lt;p&gt;Another thing I've found helpful is being cold and then warming up. Literally being in a cold room, then covering myself in a fuzzy blanket, seems to be a great way to unblock access to this when in a Freeze state. This is I think consistent with how shock works - people start shivering when you cover them in a warm blanket.&lt;/p&gt;


&lt;p&gt;I do think that giving the trauma releasing exercises is probably a good starting point for learning what it feels like to just shake uncontrollably. As I say, I don't think it really triggers the same effect, but I do think having done them made all of this more accessible.&lt;/p&gt;


&lt;p&gt;Probably experimenting with just noticing muscle tension, and trying out movements and seeing which ones feel appropriate, and which ones trigger that "not quite right" sensation, is a good starting point.&lt;/p&gt;


&lt;p&gt;I expect though the only way to learn to do this is to just do it, and that anything that lets you achieve it makes it easier the next time.&lt;/p&gt;


&lt;p&gt;If you do experiment, please let me know what does and doesn't work for you. I'd also be up for any reading recommendations if you already know about all this and have recommended tools for working with it.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2022-12-08-20:25.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2022-12-10-14:53.html</id>
    <title>Three key problems with Von-Neumann Morgenstern Utility Theory</title>
    <updated>2022-12-10T16:38:16+00:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;Three key problems with Von-Neumann Morgenstern Utility Theory&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2022-12-10&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;People semi-routinely argue about Von-Neumann Morgenstern Utility Theory with me.
This rarely goes well - it doesn't change any minds and I don't enjoy it - so I am writing up what I think the core of my objections once and for all so that I can stop having this argument.&lt;/p&gt;


&lt;p&gt;I don't really expect it to convince you, but also I'm not going to argue with you on this subject until you've read it and can tell me a good reason why you disagree.&lt;/p&gt;


&lt;p&gt;I am not going to argue that VNM theory is never useful, nor that utilities in general are not. I am going to argue that VNM theory is an overly idealised model of agent behaviour that if you try to apply it to a general purpose agent fails in crucial ways.&lt;/p&gt;


&lt;h3&gt;A brief recap&lt;/h3&gt;


&lt;p&gt;VNM theory works as follows: You have a finite set of outcomes \(O_1, \ldots, O_n\), you are given lotteries which are some precisely known mixture of these outcomes, and you have the ability to make binary choices between these lotteries, where given any two lotteries you should either strictly prefer one of them or be indifferent between the two.&lt;/p&gt;


&lt;p&gt;Under some allegedly reasonable assumptions, for any of these outcomes \(O_i\), you should be indifferent between it and some lottery \(p B + (1 - p) W\), where \(B\) is the (possibly joint) best outcome of the \(O_i\) and \(W\) is the (possibly joint) worst outcome. This \(p\) can then be considered the utility of \(O_i\) and under a bunch more (mostly actually reasonable) assumptions you should be making your choice to maximise the expected utility of lotteries.&lt;/p&gt;


&lt;h3&gt;Fredkin's paradox, the doom of VNM theory&lt;/h3&gt;


&lt;p&gt;I've written about two key issues with this setup before:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;&lt;a href="https://notebook.drmaciver.com/posts/2018-09-09-21:02.html"&gt;Physical agents can't implement discontinuous functions&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://notebook.drmaciver.com/posts/2021-06-07-06:51.html"&gt;You may have to do an infinite amount of computation to get that utility&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Both of these are variations on a key problem with VNM theory: It ignores the cost of decision making, which comes up as &lt;em&gt;Fredkin's paradox&lt;/em&gt; - the difficulty of making a decision between two very similar options is much greater than the difficulty when one is much better than the other.&lt;/p&gt;


&lt;p&gt;The first part is about physical difficulties with measurement - you can only know the probabilities up to some finite precision.
VNM theory handwaves this away by saying that the probabilities are perfectly known, but this doesn't help you because that just moves the problem to be a computational one, and requires you to be able to solve the halting problem.
e.g. choose between \(L_1 = p B + (1-p) W\) and \(L_2 = q B + (1-q) W\) where \(p = 0.0\ldots\) until machine \(M1\) halts and \(1\) after and \(q\) is the same but for machine \(M2\).&lt;/p&gt;


&lt;p&gt;The second demonstrates that what you get out of the VNM theorem &lt;em&gt;is not a utility function&lt;/em&gt;. It is an algorithm that produces a sequence converging to a utility function, and you cannot recreate even the original decision procedure from that sequence without being able to take the limit (which requires running an infinite computation, again giving you the ability to solve the halting problem) near the boundary.&lt;/p&gt;


&lt;p&gt;Both of these have the same core problem: In order to be able to identify the decision boundary that is essential for the VNM theory to work, you have to be omniscient. If you accept the flawed premise of knowing the probabilities with perfect knowledge, you can get away with only logical omniscience, but in order to know the probabilities with perfect knowledge you also have to be actually omniscient and not constrained by mere mortal abilities like having to observe the world to acquire knowledge of it.&lt;/p&gt;


&lt;p&gt;Is this a nitpicky objection? Kindof, but I think it's important, for two reasons:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;It does fairly directly demonstrate why the central thing required for VNM theory to work cannot possibly work.&lt;/li&gt;
&lt;li&gt;It does so in a way that shows that the model of VNM theory fails precisely because it fails to capture the behaviour of actually reasonable agents.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The correct thing to do with Fredkin's paradox is to not care about it. An actual agent faced with anything like the VNM setup will choose non-deterministically in the region of indifference, with much of the nondeterminism coming from imprecision in their measurements. When your two alternatives are very close together, your preference will be more or less like a coin toss, when your two alternatives are very far apart it will be close to (or actually deterministic), but the continuity argument shows that you &lt;em&gt;have&lt;/em&gt; to have intermediate values - e.g. sometimes you'll pick \(A\) over \(B\) about 60% of the time.&lt;/p&gt;


&lt;h3&gt;Bounded and known preferences&lt;/h3&gt;


&lt;p&gt;The VNM setup uses the finite number of options to ensure that there is a best and worst outcome, and calculates your utility in terms of those best and worst options. Additionally it assumes that you know exactly how bad literally the worst thing that can possibly happen is and how good literally the best thing that can possibly happen is.&lt;/p&gt;


&lt;p&gt;This means that VNM theory can only be useful in very well understood bounded domains. Getting to the point where you can even start running the computation for utility of somethign requires \(O(n)\) work to figure out the best and worst thing, you need to be familiar enough with all the options to have real preferences over them, and also there just can't be that many options.&lt;/p&gt;


&lt;p&gt;For example, VNM theory is very poorly suited to dealing with anything to do with money, which has unbounded utility. This is pretty impressive going for a normative utility theory. Good job failing to handle literally the most utility like problem.&lt;/p&gt;


&lt;p&gt;You could argue that there is a maximum amount of money that matters and for many bounded domain cases that's true and reasonable, but if that maximum amount is "literally the entire world economy", I argue that even if you treat this as the best possible thing, you have really very little conception of how good it is, and cannot possibly do so.&lt;/p&gt;


&lt;p&gt;Even if you could have a reasonable opion, it's worth bearing in mind that you are now multiplying very large numbers by very small numbers. This makes the VNM utility extremely impractical, because you've basically reduced choosing what to have for lunch to the problem of Pascal's Wager.&lt;/p&gt;


&lt;h3&gt;Updating preferences as a result of decisions&lt;/h3&gt;


&lt;p&gt;In making its reasonableness assumptions, VNM theory equates two things that are distinct in any real agent: Instantaneous preferences and actual decisions over time. For example, it uses the possibility of being dutch booked as an argument against intransitive preferences.&lt;/p&gt;


&lt;p&gt;But dutch booking is not a thing you can do to preferences, it's a thing you can do to decisions, and you can only use dutch books to extract infinite money from intransitive decisions if the agent is forced to make the same decision every time, i.e. can't learn from experience.&lt;/p&gt;


&lt;p&gt;(Dutch booking is more complicated with non-deterministic decisions, but a broadly similar argument applies where instead of requiring transitivity you require certain bounds on sums of cycles. We're not going to worry about that here)&lt;/p&gt;


&lt;p&gt;One easy way to learn from experience is to stop accepting offers from people who are trying to dutch book you, but even without that many patterns of intransitive decision making that are exhibited during learning are not susceptible to dutch booking, because they converge over time to transitive ones. e.g. an agent playing a multi-armed bandit problem (this again assumes imperfect knowledge of probabilities which VNM theory assumes away so isn't strictly applicable, but it's a good example) will regularly swap its preferences between arms as it plays, exhibiting many cycles.&lt;/p&gt;


&lt;p&gt;One reason these differ is assumed away by VNM theory, which is that you know the probabilities. In actual decision making, you learn the probabilities through making choices which refine your world model. e.g. if you look at a multi-armed bandit algorithm, even though it has a perfectly well defined utility function, it routinely reverses its decisions as it learns more about the distribution of results of pulling a particular lever.&lt;/p&gt;


&lt;p&gt;Even with known probabilities, real agents will change their mind, because often the only way to know how to value something is to try it. If you offer me a Durian, I'm probably going to say yes. If you offer me a Durian a second time, I'm probably going to say no. This isn't inconsistency, it's just learning from experience.&lt;/p&gt;


&lt;p&gt;Another way decisions can change is because choices you make have actual consequences. For example, consider a betting agent. Given a choice between two monetary lotteries, one of which satisfies the Kelly criterion and one of which doesn't, they should pick the one that does, or in general the one that maximises the expected logarithm of their bankroll after making it, but then after the lottery is run their bankroll will be different, and so their future preferences will change.&lt;/p&gt;


&lt;p&gt;Now, I already know the objection, VNM theory is about states of the world, not individual decisions, but this objection falls flat for several key reasons:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;It justifies the reasonableness of its assumptions based on patterns of decision making, not behaviour of preferences, because without any consequence for preferences anything goes.&lt;/li&gt;
&lt;li&gt;The number of possible states of the world is &lt;em&gt;very&lt;/em&gt; large, which runs into the problem that it is poorly suited to large and unbounded domains, so it is also bad for this.&lt;/li&gt;
&lt;/ol&gt;


&lt;h3&gt;Where does VNM theory work?&lt;/h3&gt;


&lt;p&gt;Basically it doesn't. VNM theory is bad, even in situations where utility theory is good.
It is a poor normative argument that people have taken far more seriously than it deserves, with most of its foundation points failing to actually be viable for real agents.&lt;/p&gt;


&lt;p&gt;That doesn't mean utility theory is never useful.
In general, people &lt;em&gt;will&lt;/em&gt; converge over time to some sort of approximately utility maximising behaviour for some utility function in small domains that can be well understood and that have strong incentives for maximisation. Even there you will tend to run into the Fredkin's paradox problem, with significantly more nondeterminism at the decision margins than VNM theory would suggest.&lt;/p&gt;


&lt;p&gt;It does mean however that in large unbounded high uncertainty environments with agents who learn their preferences over time and actually impact the state of the world, VNM theory cannot possibly predict their behaviour, and its claims to have normative force over their behaviour don't hold up.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2022-12-10-14:53.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2022-12-20-17:21.html</id>
    <title>Action generators</title>
    <updated>2022-12-20T18:13:15+00:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;Action generators&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2022-12-20&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;Quick, do something.&lt;/p&gt;


&lt;p&gt;Now do something without leaving your current position. e.g. if you're sitting down stand up.&lt;/p&gt;


&lt;p&gt;Now, without leaving your current position, do something with your left hand.&lt;/p&gt;


&lt;p&gt;Now, without leaving your current position, do something with your left hand without touching anything with it.&lt;/p&gt;


&lt;p&gt;Now, without leaving your current position, do something with your left hand that feels good, without touching anything with it.&lt;/p&gt;


&lt;p&gt;Each of these instructions is an action generator: Something that prompts you to act in the world. These can be instructions, but they can also be observations, thoughts, etc. If a ball comes flying towards your head, you hopefully duck. Action generator!&lt;/p&gt;


&lt;p&gt;Any action generator has the default response to it: Do nothing. When I told you to do something, you probably ignored it and kept reading (this is of course doing something). Possibly by the end the instructions were interesting enough that you went "Oh, sure, I'll give that a go.", possibly not.&lt;/p&gt;


&lt;p&gt;Doing nothing isn't always a good idea. If you have a do nothing response to the ball flying towards your head, you get hit. Hope it's not a cricket ball. Those hurt. A lot.&lt;/p&gt;


&lt;p&gt;The thing about the list of action generators I gave above is that each of them is more specific than the one preceding it, and yet it is &lt;em&gt;very&lt;/em&gt; unlikely that the actions generated by the last are ones you would have thought of in response to the first action generator.&lt;/p&gt;


&lt;p&gt;This is because the broader the action generator is, the more possibilities there are, the harder it is to navigate to any particular possibility in particular.&lt;/p&gt;


&lt;p&gt;It's also because the more specific action generator gives you permission. The ball coming at your head generates an action of duck, so you duck. You could have ducked even if the ball wasn't coming at your head, but why would you?&lt;/p&gt;


&lt;p&gt;Action generators are often useful for doing things that you could have done with a broader action generator but, for one reason or another, didn't.&lt;/p&gt;


&lt;p&gt;If someone is coming around, that's an action generator to clean your house. You could have done this at any time before, but you didn't. That isn't necessarily bad, but sometimes you &lt;em&gt;wanted&lt;/em&gt; to do it before and still didn't.&lt;/p&gt;


&lt;p&gt;This points to the fact that an action generator really has at least two properties:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;What actions it &lt;em&gt;can&lt;/em&gt; generate.&lt;/li&gt;
&lt;li&gt;What actions it encourages you to take.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Someone coming over doesn't constrain your actions much compared to the default action generator, but it does create a very strong incentive to tidy up, in much the same way that you're free to do whatever you like in the lead up to the ball arriving, but after that if your actions have not taken the ball into account you're going to deal with the consequences.&lt;/p&gt;


&lt;p&gt;One thing I'd like to highlight from the hand thing is that to a large degree, making the action generator more specific automatically creates an encouragement to action, because it lowers the activation energy to acting by removing a large class of decisions. "What should I do with my life?" - vast and impossible set of decisions. "What should I do today?" can still be pretty daunting. "What should I eat for breakfast?" - now pretty accessible. &lt;a href="https://twitter.com/DRMacIver/status/1603792788667207681"&gt;Onward! Towards the abyss&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;Another thing worth noting is that any theory about the world is an action generator. You create a model of the world, and this gives you a set of actions that makes sense under that model. For example, when we &lt;a href="https://drmaciver.substack.com/i/53848690/inventing-symbolic-games"&gt;invent symbolic games&lt;/a&gt; to improve our ability at something, we are doing this.&lt;/p&gt;


&lt;p&gt;Importantly, a theory works as an action generator &lt;em&gt;even if it's wrong&lt;/em&gt;. You can still adopt the theory and act based on it, and often those actions will be perfectly fine, because they're interesting in their own right even if the reasons that lead to them aren't correct. This is akin to the saying that all models are wrong, but some are useful. All models are useful, in that having action generators is useful because it may lead you to things that you wouldn't otherwise have thought of.&lt;/p&gt;


&lt;p&gt;I think many "bad" theories persist because they're useful action generators. More, though, I think often bad theories are better than good theories, because they generate actions that you would never have thought of if you were constrained to adopting more reasonable theories.&lt;/p&gt;


&lt;p&gt;For example, I think a lot of therapy modalities work like this. My reliably experience reading therapy books is that they explain their theory and I go "lol, sure" and they provide their evidence and I go "an easier explanation of this is that you're lying", and then I do their exercises and... well, most of the time it doesn't work, but it does something interesting often enough that it was worth reading the book.&lt;/p&gt;


&lt;p&gt;I think this is often the case: It's worth having a stable of bad theories lying around that generate actions that you wouldn't otherwise have thought of and that are basically harmless in the worst case, and possibly interesting in the best case.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2022-12-20-17:21.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2023-02-14-23:37.html</id>
    <title>My current protocol for energy levels</title>
    <updated>2023-02-15T04:39:37+00:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;My current protocol for energy levels&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2023-02-14&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;People keep asking me questions about my recent miracle increase in mood and energy level, so this is a full write up of what I'm doing.&lt;/p&gt;


&lt;p&gt;Disclaimer: None of this is medical advice. I'm not competent to give you medical advice. This is a document of what I'm currently doing,
which it may or may not help you to emulate, but also depending on your current health situation some or all of it may not be a good
idea for you, and I'm not competent to tell you which bits.&lt;/p&gt;


&lt;h3&gt;Background&lt;/h3&gt;


&lt;p&gt;I've recently had a really dramatic increase in mood and mental energy levels, reversing a years long trend of things getting worse
and worse for me over time.
I credit this mostly to taking Inositol, although there are some confounding factors and fears of placebo effect that make me
less confident in that than I'd like to be (I'm still very confident, but it feels obviously true and then I have to add in
a bunch of "OK, but..." caveats).&lt;/p&gt;


&lt;p&gt;The theory goes as follows: Inositol is an essential sugar that the brain uses. Its lack causes issues in energy levels and mental health,
among other things, and as a result it can be an effective treatment for those. It is produced by digestion, so if you have digestive
problems you may not be producing enough of it, and supplementing with it can plausibly help.&lt;/p&gt;


&lt;p&gt;To the best of my ability to determine the above is pretty established science, though inositol as a medical intervention for these issues
does not seem to be common (it's considered an established treatment for PCOS, and the fact that it can help mood seems to be known but not commonly used).&lt;/p&gt;


&lt;p&gt;Anyway, I started taking inositol after &lt;a href="https://acesounderglass.com/"&gt;Elizabeth Van Nostrand&lt;/a&gt; suggested it in a conversation, and immeditaely felt more like a functioning human being than I had in years. I've mentioned this on Twitter and discord and a bunch of people went "Well I'll give it a go" and some small but non-negligible fraction of them seem to have seen the same results. I think we're up to 5 or 6, but I don't know how many people have tried it. My guess is this corresponds to somewhere in the 1-10% region, in a population probably heavily selected for having these problems.&lt;/p&gt;


&lt;p&gt;Known side effects of inositol which at least one person has reported after this are headaches, tiredness, and stomach problems. I had some stomach problems at the beginning, but not particularly bad ones and frankly I'm used to a bit of stomach pain so I ignord it. It seems to have gone away, but that may be because of other things I'm doing to fix my digestion.&lt;/p&gt;


&lt;p&gt;In addition, there may be long-term consequences (unclear to me if &lt;em&gt;bad&lt;/em&gt; consequences) to taking inositol. I don't really understand these yet,
but the reason it gets used as a treatment for PCOS is that it has effects on a bunch of hormones. I'm currently ignoring this, but do need to do
some detailed research. I do think at the levels I'm taking it at it's probably pretty safe.&lt;/p&gt;


&lt;h3&gt;What I'm taking&lt;/h3&gt;


&lt;p&gt;I'm currently taking 1-1.5g of inositol in the morning, and sometimes I take another 0.5-1g in the afternoon. Variation is because I'm doing some not very scientific experiment to find the right amount and timing. I started at 0.5g first thing and even that made a big impact.&lt;/p&gt;


&lt;p&gt;I'm currently treating 2g as the maximum definitely safe daily dose, but it's likely that it's higher than that. 2g is roughly the amount that your body is supposed to produce per day, PCOS treatment protocols seem to be 4g or even higher. At present I have no plans to go above 2g, and am hoping to reduce that over time if the rest of what I'm doing works.&lt;/p&gt;


&lt;p&gt;The rest of what I'm doing, which is plausibly what made the stomach side effects from inositol go away, is an attempt to actually fix the digestion problems that I think are probably underlying why inositol has such a large benefit for me.&lt;/p&gt;


&lt;p&gt;These are:&lt;/p&gt;


&lt;ul&gt;
&lt;li&gt;&lt;a href="https://bioandme.co.uk/"&gt;Bio&amp;amp;Me&lt;/a&gt; "Super seedy and nutty" porridge every morning (I've actually been doing this one for about a year)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://athleticgreens.com/en"&gt;Athletic greens&lt;/a&gt; every morning as an aggressive nutritional supplement for anything I might not be getting properly.&lt;/li&gt;
&lt;li&gt;Strong dose of probiotic every morning. I am currently using three sachets of &lt;a href="https://www.vsl3.co.uk/"&gt;VSL3&lt;/a&gt;. I'm not sold on this being the correct probiotic, but it does seem to help. My plan is to cycle through various brands of plausible probiotics. I will try &lt;a href="https://www.visbiome.com/"&gt;visbiome&lt;/a&gt; next, and possibly &lt;a href="https://seed.com/"&gt;Seed&lt;/a&gt; after that.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.amazon.co.uk/gp/product/B01I3O6PJ4/"&gt;Digestive enzymes&lt;/a&gt; with every meal.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I'm also trying to eat a little bit of sauerkraut every day. Fermented vegetables are meant to be good for gut health, and I have problems with digesting brassicas, and some vague notion that eating a little bit of it while also trying to repair my gut microbiome might encourage the sort of bacteria that are good at digesting brassicas. This seems to be at the bare minimum not hurting. Maybe it's also helping, who knows.&lt;/p&gt;


&lt;p&gt;I've also today started adding a scoop of freeze-dried pineapple to my morning green-stuff-and-bacteria drink. There are a bunch of ultra low confidence reasons why this might be a good idea, but I wouldn't put much faith in this particular suggestion for now.&lt;/p&gt;


&lt;p&gt;My stomach and digestion seem to be significantly happier as a result of these, although I have no idea at the moment whether this will result in a long term fix or just a short term palliative.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2023-02-14-23:37.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2023-06-20-17:00.html</id>
    <title>Larger selves</title>
    <updated>2023-06-21T10:54:55+01:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;Larger selves&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2023-06-20&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;Note: This is transcribed verbatim from my physical notebook, so when I refer to a notebook in here I'm talking about an actual book I'm writing in with an actual pen. I just didn't want to inflict my hand writing on you.&lt;/p&gt;


&lt;p&gt;There are subjects I don't know how to write about in a way that communicates why they are important to me, either because they always come out flat, or because they come out disordered in their intensity.&lt;/p&gt;


&lt;p&gt;One of the subjects that always comes out flat is that I practice a sort of religion. We're a congregation of one person (me) and not that interested in converts.&lt;/p&gt;


&lt;p&gt;Whenever I try to explain it, it comes out sounding like either a joke or some very dry philosophy. Honestly it started out that way. But this matters to me, at quite a personal level, even if I don't know how to show it.&lt;/p&gt;


&lt;p&gt;The joke version goes thus: I believe in a supreme being, in that I think beinghood is closed under union, thus the set of all beings has a superema (a maximal element).&lt;/p&gt;


&lt;p&gt;I didn't say it was a funny joke.&lt;/p&gt;


&lt;p&gt;(Technical nitpick: Beings are actually closed under &lt;em&gt;interaction&lt;/em&gt;, not union. As a result this gets tricky when you bring relativity into the picture. Don't worry about this.)&lt;/p&gt;


&lt;p&gt;The part of this that actually matters to me is that consciousness, and to some degree personhood, happens at every scale. As I write this, I am not having thoughts and recording them on the page. I am thinking by writing. The thought occurs not in my head, but in the combined head/hand/notebook system. Me plus a notebook behaves like a different, albeit very similar, entity to me without.&lt;/p&gt;


&lt;p&gt;The same occurs in conversation. As you and I talk, the pair of us think together. Thoughts are had that we could not have had alone. There is an &lt;em&gt;us&lt;/em&gt; above any beyond there being a you and separately also a me.&lt;/p&gt;


&lt;p&gt;This is true with action as well as thought of course. I can do things with a knife that I cannot do without. You and I can do things together that we cannot do alone.&lt;/p&gt;


&lt;p&gt;Less obviously, it is true of feeling too. Empathy is not feeling what another feels, but it is a sort of second-person form of feeling. As we synchronise there is a form of shared feeling that &lt;em&gt;we&lt;/em&gt; have. This is particularly obvious in sex or dance, but also in e.g. games or pair programming. There is a shared feeling between us.&lt;/p&gt;


&lt;p&gt;Something that thinks, acts, and feels seems to me to be a legitimate candidate for personhood. It's certainly not a person in exactly the same way that a human is, but it still seems like a person to me.&lt;/p&gt;


&lt;p&gt;You and I together form an us-person distinct from but overlapping with the I-person and the you-person. The same holds for me and my notebook (although I don't think my notebook on its own counts as a person. I sometimes think it's useful to think of personhood as continuous rather than binary. In this view, it is merely not much of a person).&lt;/p&gt;


&lt;p&gt;If you like, you can substitute "conscious entity" for "person" here, but for me "person" carries more of the right moral and emotional undertones.&lt;/p&gt;


&lt;p&gt;This extends further upwards of course. A team has personhood. A company. A country. The world.&lt;/p&gt;


&lt;p&gt;I don't think it requires a human in the mix to be a person. We're not too far off having AI that I'd consider clearly warranted some degree of personhood. A dog seems clearly nearly or wholly a person to me. A forest is at least as much of a person as a dog.&lt;/p&gt;


&lt;p&gt;This also extends downwards. Any reasonably careful degree of attention to yourself and your experience shows that you are made up of parts. You see this with mixed feelings ("part of me feels X while another part feels Y"). Internal family systems and other types of parts work recommend treating these parts of you as people. Maybe they are.&lt;/p&gt;


&lt;p&gt;You can also see this with aphasia. You can't just recall. The best you can hope for is create a space for the part of you that knows the answer to put it when it's done.&lt;/p&gt;


&lt;p&gt;You are not a single unitary entity any more than the notebook and I are - we are cooperating modules working together.&lt;/p&gt;


&lt;p&gt;This starts to sound very "the self is an illusion" but that's bullshit. The self is no more an illusion than a team is. A team is made up of individuals, but the team is created when those individuals work together.&lt;/p&gt;


&lt;p&gt;The team exists in the connections as well as in the parts, and there is a health and function of the team above and beyond that of the individual parts.&lt;/p&gt;


&lt;p&gt;Much of why this matters to me is that I want to be a better person, and I want to participate in being a better person.&lt;/p&gt;


&lt;p&gt;We as people confined to single bodies need to embrace that embodiment, and to learn to self better, but part of how we do that is by learning to participate in larger, better, selves that extend beyond us.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2023-06-20-17:00.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2023-07-27-13:03.html</id>
    <title>Adaptive parallel test-case reduction</title>
    <updated>2023-07-28T09:05:39+01:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;Adaptive parallel test-case reduction&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2023-07-27&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;There's a very simple algorithm I call "adaptive parallel deletion", which I think of as completely standard and thus often forget that literally nobody but me uses.
I haven't written it down anywhere, so here's me finally getting around to doing that.&lt;/p&gt;


&lt;p&gt;This algorithm is a component of test-case reduction that replaces the classic delta debugging algorithm - that it is, it takes some sequence and produces a subsequence of it satisfying some condition,
such that if you remove any one element from its output the condition is no longer satisfied.&lt;/p&gt;


&lt;p&gt;The core features of adaptive parallel deletion are:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;When there are large reductions that can be made, it will usually run in &lt;code&gt;O(log(n))&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;When there are no reductions that can be made, it will run in &lt;code&gt;O(n)&lt;/code&gt;, but with the work scaling to as much parallelism as you can give it.&lt;/li&gt;
&lt;li&gt;It will scale fairly gracefully in between the two.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Here it is:&lt;/p&gt;


&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;single_pass_delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;"""Returns a version of `test_case` that satisfies `condition` and&lt;/span&gt;
&lt;span class="sd"&gt;    is "one-minimal" in the sense that you cannot delete any single&lt;/span&gt;
&lt;span class="sd"&gt;    member of it and have it still satisfy the condition."""&lt;/span&gt;
    &lt;span class="n"&gt;test_case&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;can_delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;condition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;[:&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:])&lt;/span&gt;

    &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="c1"&gt;# Scan in parallel for the first location where we can delete&lt;/span&gt;
            &lt;span class="c1"&gt;# a single element of the list. If no more elements are deletable&lt;/span&gt;
            &lt;span class="c1"&gt;# this will run with as much parallelism as we can give it.&lt;/span&gt;
            &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;find_first&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;can_delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;j&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;j&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="n"&gt;NotFound&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;

        &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="c1"&gt;# Now that we've found an area where there's at least one deletable&lt;/span&gt;
        &lt;span class="c1"&gt;# element, we hope that it's part of a large chunk of deletable elements.&lt;/span&gt;
        &lt;span class="c1"&gt;# This finds an integer k so that we can delete the next k elements&lt;/span&gt;
        &lt;span class="c1"&gt;# and not the next k + 1 elements, running in O(log(k)). This hopefully&lt;/span&gt;
        &lt;span class="c1"&gt;# lets us delete a reasonable large chunk at a time.&lt;/span&gt;
        &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;find_integer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;can_delete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
        &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;test_case&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

        &lt;span class="c1"&gt;# Because we chose k such that k + 1 elements are not deletable, we know&lt;/span&gt;
        &lt;span class="c1"&gt;# that the element left at i (if any, we might have deleted the whole list)&lt;/span&gt;
        &lt;span class="c1"&gt;# is now not deletable, so we increment i to skip past it on the next&lt;/span&gt;
        &lt;span class="c1"&gt;# iteration. This is purely a performance optimisation, but in the worst&lt;/span&gt;
        &lt;span class="c1"&gt;# case might cause us to make twice as many calls to `condition` as we&lt;/span&gt;
        &lt;span class="c1"&gt;# need to if we skip it.&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;test_case&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Where the functions this uses are &lt;code&gt;find_integer&lt;/code&gt; that I've &lt;a href="https://notebook.drmaciver.com/posts/2019-04-30-13:03.html"&gt;previously written about here&lt;/a&gt; which is just an exponential probe and binary search (so runs in &lt;code&gt;O(log(k))&lt;/code&gt; when it returns &lt;code&gt;k&lt;/code&gt;) and &lt;code&gt;find_first&lt;/code&gt; is defined as follows:&lt;/p&gt;


&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;itertools&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;islice&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NotFound&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ne"&gt;Exception&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;find_first&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="sd"&gt;"""Returns the first element of `target` that satisfies `predicate`,&lt;/span&gt;
&lt;span class="sd"&gt;    or raises `NotFound` if none do."""&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;NotFound&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="n"&gt;parallelism&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cpu_count&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;parallelism&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;NotFound&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_workers&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;parallelism&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;executor&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;iter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;chunk_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;chunk&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;islice&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;chunk_size&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="n"&gt;NotFound&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;executor&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;chunk&lt;/span&gt;&lt;span class="p"&gt;)):&lt;/span&gt;
                    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;
                &lt;span class="n"&gt;chunk_size&lt;/span&gt; &lt;span class="o"&gt;*=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In particular &lt;code&gt;find_first&lt;/code&gt; is designed so that when it does not find an answer it scales up rapidly to be embarrassingly parallel, but when it finds an answer early on it doesn't do much redundant work (you still have the overhead of the thread pool and such, but it doesn't actually run much extra code).&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2023-07-27-13:03.html" rel="alternate"/>
  </entry>
  <entry>
    <id>https://notebook.drmaciver.com/posts/2024-01-02-12:48.html</id>
    <title>January is a daily writing month</title>
    <updated>2024-01-02T12:48:00+00:00</updated>
    <content type="html">

&lt;p class="subtitle"&gt;January is a daily writing month&lt;/p&gt;


&lt;dl class="metadata"&gt;
&lt;dt&gt;Published&lt;/dt&gt;
&lt;dd class="post-date"&gt;2024-01-02&lt;/dd&gt;
&lt;/dl&gt;


&lt;p&gt;I've long been a disbeliever in new years resolutions, but I'm giving them a go this year. I'm calling them "New Years Aspirations" rather than "resolutions" because that makes me feel better about them.&lt;/p&gt;


&lt;p&gt;My three aspirations for the year are:&lt;/p&gt;


&lt;ol&gt;
&lt;li&gt;See my friends in person more.&lt;/li&gt;
&lt;li&gt;Write more.&lt;/li&gt;
&lt;li&gt;Continue to improve my health and exercise levels.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;(3) is a bit of a cliche but in my defence I've been working on it for about four months already, so it's not a fresh start so much as a "that thing I'm already doing but more so".&lt;/p&gt;


&lt;p&gt;(2) is the main focus of this though: I've not been writing recently. My &lt;a href="https://drmaciver.substack.com/p/why-to-explain-things-you-already"&gt;last newsletter issue&lt;/a&gt; is from September! Literally more than 3 months have passed since I wrote a newsletter issue. I don't like that. I feel bad about it, but not in the sense that I owe it to anyone, I feel bad because writing is an important part of my life and I've not been doing that. So I'd like to fix this.&lt;/p&gt;


&lt;p&gt;Unfortunately the reasons I haven't been writing are pretty clear: I've been busy, and I've been depressed. Both are still true.&lt;/p&gt;


&lt;p&gt;Still, it continues to be my belief that the trick to getting out of depression is to do slightly more than depression is telling you is reasonable. Not &lt;em&gt;vastly&lt;/em&gt; more, but a bit more. This helps you relearn what is actually possible and gradually broadens the boundaries of your life-world, helping ease the depression. At least, that's the theory.&lt;/p&gt;


&lt;p&gt;Right now, writing newsletter issues feels intolerable. So instead I'm going to write daily notebook posts and see if that manages to rebuild the habit and thought processes of writing. Maybe I'll write some newsletter issues this month, maybe I won't. We'll see.&lt;/p&gt;


&lt;p&gt;The astute observer will note that this is coming out on the &lt;em&gt;second&lt;/em&gt; of January. I'm going to put out a catch up post immediately after this one and count this one as yesterday's post.&lt;/p&gt;


&lt;p&gt;Don't expect a high standard of writing this month.
To start with I'm just going to do draft bankruptcy from the newsletter. After that I'll probably do Tarot prompts whenever I don't have a good idea what to write about.&lt;/p&gt;

</content>
    <link href="https://notebook.drmaciver.com/posts/2024-01-02-12:48.html" rel="alternate"/>
  </entry>
</feed>
