# Using generating functions to work out sums

In [my last post](https://notebook.drmaciver.com/posts/2025-04-24-10:00.html) I talked about the problem of working out \(\sum\limits_{i = 1}^n i\). In it, I strongly implied that there wasn't a way to just work out the answer.

This isn't actually true. There's a quite straightforward way to just work out the answer. It still requires a little bit of spotting the trick, but the tricks in question are more like puzzle pieces that you have to fit together than genuine insights.

However, it requires a bunch more calculus than I wanted to assume in my last post, so I left it out. If you do know the calculus it might be informative though.

The idea is this: Rather than work out \(\sum\limits_{i = 1}^n i\), we work out \(f_n(x) = \sum\limits_{i = 1}^n i x^i\), and then evaluate \(f(1)\).

This will, weirdly, turn out to be easier.

How do we do this? Like so:

\begin{align*}
f_n(x) & = \sum\limits_{i = 1}^n i x^i \\
& = x \sum\limits_{i = 1}^n i x^{i - 1} \\
& = x \frac{d}{dx} \sum\limits_{i = 1}^n x^i \\
& = x \frac{d}{dx} \frac{x^{n + 1} - 1}{x - 1} \\
& = x \left(\frac{(n + 1)x^n}{x - 1} - \frac{x^{n + 1} - 1}{(x - 1)^2} \right) \\
& = x \left(\frac{(n + 1)x^n(x - 1) - x^{n + 1} + 1}{(x - 1)^2} \right) \\
& = x \left(\frac{n x^n(x - 1) - x^{n + 1} + 1}{(x - 1)^2} \right) \\
& = x \left(\frac{(n - 1) x^{n + 1} - n x^n + 1}{(x - 1)^2} \right) \\
\end{align*}

We want to evaluate \(f_n(1)\), but this would require us to divide 0 by 0, so we have to take limits. We can do this with two applications of l'Hopital's rule.

\begin{align*}
\lim_{x \to 1} \frac{(n - 1) x^{n + 1} - n x^n + 1}{(x - 1)^2} & =  \frac{(n - 1)(n + 1) x^n - n^2 x^{n -1}}{2(x - 1)}\\
\end{align*}
